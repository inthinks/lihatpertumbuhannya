<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');
class Register extends CI_Controller {
	function __construct(){
		parent::__construct();
	}

	function index(){
		$this->data['content']='';
		$this->load->view('common/body',$this->data);
	}

	function register(){
		$name = $this->security->xss_clean($this->input->post('name'));
		$email = $this->security->xss_clean($this->input->post('email'));
		$telp = $this->security->xss_clean($this->input->post('telp'));
		$tanggal_lahir = $this->input->post('tanggal_lahir');
		$produk_susu = $this->security->xss_clean($this->input->post('produk_susu'));

		if($name == ""){
			$this->session->set_flashdata('email',$this->input->post('email'));
			$this->session->set_flashdata('name',$this->input->post('name'));
			$this->session->set_flashdata('notif', 'Nama harus diisi');
			redirect($_SERVER['HTTP_REFERER']);
		}
		if($email ==""){
			$this->session->set_flashdata('notif', 'Email harus diisi');
			redirect($_SERVER['HTTP_REFERER']);
		}
		if(!filter_var($email, FILTER_VALIDATE_EMAIL)){
			$this->session->set_flashdata('notif', 'Format email salah');
			redirect($_SERVER['HTTP_REFERER']);
		}
		if($telp ==""){
			$this->session->set_flashdata('notif', 'Telp harus diisi');
			redirect($_SERVER['HTTP_REFERER']);
		}
		if(is_nan($telp)){
			$this->session->set_flashdata('notif', 'Telp harus angka');
			redirect($_SERVER['HTTP_REFERER']);
		}
		if($produk_susu ==""){
			$this->session->set_flashdata('notif', 'Produk susu harus diisi');
			redirect($_SERVER['HTTP_REFERER']);
		}

		$data=array('name'=>$name,
					'email'=>$email,
					'telp'=>$telp,
					'tanggal_lahir_sikecil'=>$tanggal_lahir,
					'product_susu_yang_digunakan'=>$produk_susu);

		$this->general_model->update_data('user_tb',$data,array('id'=>));
	}


}
?>